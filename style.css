/* Stile generale */
body { background-color: #f8f9fa; }

/* Login */
#login-container .card { border: none; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }

/* Layout */
#main-app { display: flex; min-height: 100vh; }

/* Sidebar */
.sidebar {
  width: 250px;
  background-color: #343a40;
  color: white;
  position: fixed;
  height: 100%;
  padding-top: 20px;
  flex-shrink: 0;
  overflow-y: auto;
}
.sidebar h4 { color: #fff; }
.sidebar .nav-link { color: #adb5bd; padding: 10px 20px; transition: background-color .2s,color .2s; }
.sidebar .nav-link:hover { background-color: #495057; color: white; }
.sidebar .nav-link.active { background-color: #0d6efd; color: white; }
.sidebar .nav-section-title { color: #6c757d; font-size: .9rem; font-weight: bold; padding: 20px 20px 5px; text-transform: uppercase; }
.sidebar .nav-item i { margin-right: 10px; }
#logout-btn { color: #dc3545; }
#logout-btn:hover { background-color: #dc3545; color: white; }

/* Main content */
.main-content { margin-left: 250px; padding: 30px; width: calc(100% - 250px); }
.content-section { background-color: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,.05); }
.content-section h2 { margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 10px; color: #333; }

/* Home */
#current-datetime { font-size: 1.1rem; color: #6c757d; }

/* Calendar */
#calendar-widget table { width: 100%; border-collapse: collapse; }
#calendar-widget th, #calendar-widget td { text-align: center; padding: 8px; border: 1px solid #dee2e6; }
#calendar-widget th { background-color: #f8f9fa; }
#calendar-widget .today { background-color: #0d6efd; color: white; font-weight: bold; border-radius: 50%; }

/* Help button */
#help-btn { position: fixed; bottom: 20px; right: 20px; z-index: 1055; }

/* Allineamento numeri inventario */
#inventario table tbody td:last-child { text-align: right; }

/* Stampa (fallback) */
@media print {
  body * { visibility: hidden; }
  .modal-body, .modal-body * { visibility: visible; }
  .modal { position: absolute !important; left: 0 !important; top: 0 !important; margin: 0 !important; padding: 0 !important; width: 100% !important; max-width: 100% !important; border: none !important; box-shadow: none !important; overflow: visible !important; }
  .modal-dialog { max-width: 100% !important; margin: 0 !important; }
  .modal-content { border: none !important; box-shadow: none !important; }
  .modal-header, .modal-footer, #help-btn { display: none !important; }
}

/* === OL: Dark mode + badge utilities (appended) === */
html[data-bs-theme='dark'] body {
  background-color: #0b0e12;
  color: #e2e8f0;
}
html[data-bs-theme='dark'] .content-section {
  background-color: #151a21;
  color: #e2e8f0;
  box-shadow: 0 1px 2px rgba(0,0,0,0.4);
}
html[data-bs-theme='dark'] .sidebar {
  background-color: #111827;
  color: #e5e7eb;
}
html[data-bs-theme='dark'] .sidebar .nav-link { color: #cbd5e1; }
html[data-bs-theme='dark'] .sidebar .nav-link:hover { background-color: #1f2937; color: #fff; }
html[data-bs-theme='dark'] .sidebar .nav-link.active { background-color: #3b82f6; color: #fff; }
html[data-bs-theme='dark'] .table { color: #e2e8f0; }
html[data-bs-theme='dark'] .form-control, 
html[data-bs-theme='dark'] .form-select, 
html[data-bs-theme='dark'] .btn {
  border-color: #374151;
}
html[data-bs-theme='dark'] .card { background-color: #0f172a; color: #e2e8f0; }
html[data-bs-theme='dark'] .modal-content { background-color: #101826; color:#e2e8f0; }
html[data-bs-theme='dark'] .badge.bg-warning,
html[data-bs-theme='dark'] .badge.text-bg-warning { color: #111; }
html[data-bs-theme='dark'] .badge.bg-light,
html[data-bs-theme='dark'] .badge.text-bg-light { color: #111; }

/* Defensive right align for last column (quantities) */
#inventario table td:last-child, #inventario table th:last-child { text-align: right; }


/* =========================
   DARK MODE OVERRIDES (Bootstrap 5.3 data-bs-theme)
   ========================= */
:root[data-bs-theme='dark'] {
  --ol-panel-bg: #1f232a;
  --ol-panel-border: #2b2f36;
  --ol-surface: #2b2f36;
  --ol-text: #e6e6e6;
  --ol-muted: #a6a6a6;
}

[data-bs-theme='dark'] body { background-color: #121212; color: var(--ol-text); }
[data-bs-theme='dark'] .content-section { background-color: var(--ol-panel-bg); color: var(--ol-text); border-color: var(--ol-panel-border); box-shadow: 0 2px 4px rgba(0,0,0,.35); }
[data-bs-theme='dark'] .card { background-color: var(--ol-panel-bg); color: var(--ol-text); border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] .modal-content { background-color: var(--ol-panel-bg); color: var(--ol-text); border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] .modal-header, 
[data-bs-theme='dark'] .modal-footer { border-color: var(--ol-panel-border); }

/* Tables */
[data-bs-theme='dark'] .table { color: var(--ol-text); border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] .table thead th { background-color: var(--ol-surface); color: var(--ol-text); }
[data-bs-theme='dark'] .table tbody tr { border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] .table-hover>tbody>tr:hover { background-color: rgba(255,255,255,.06); }

/* Forms */
[data-bs-theme='dark'] .form-control,
[data-bs-theme='dark'] .form-select,
[data-bs-theme='dark'] .form-control:focus,
[data-bs-theme='dark'] .form-select:focus {
  background-color: var(--ol-surface);
  color: var(--ol-text);
  border-color: var(--ol-panel-border);
}
[data-bs-theme='dark'] .form-control::placeholder { color: var(--ol-muted); }

/* Misc */
[data-bs-theme='dark'] hr { border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] #calendar-widget th { background-color: var(--ol-panel-bg); }
[data-bs-theme='dark'] #calendar-widget td,
[data-bs-theme='dark'] #calendar-widget th { border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] .list-group-item { background-color: var(--ol-panel-bg); color: var(--ol-text); border-color: var(--ol-panel-border); }
[data-bs-theme='dark'] .toast { background-color: var(--ol-surface); color: var(--ol-text); border-color: var(--ol-panel-border); }

/* Ensure badges remain readable on dark */
[data-bs-theme='dark'] .badge { filter: none; }

/* === OL: Dark Mode overrides (Bootstrap 5.3 color modes) === */
:root[data-bs-theme='dark'] { --ol-surface:#1f232a; --ol-border:#2b2f36; --ol-text:#e6e6e6; --ol-muted:#a6a6a6; }

[data-bs-theme='dark'] body { background-color:#121212; color:var(--ol-text); }
[data-bs-theme='dark'] .content-section { background-color:var(--ol-surface); color:var(--ol-text); border-color:var(--ol-border); box-shadow:0 2px 4px rgba(0,0,0,.35); }
[data-bs-theme='dark'] .card { background-color:var(--ol-surface); color:var(--ol-text); border-color:var(--ol-border); }
[data-bs-theme='dark'] .modal-content { background-color:var(--ol-surface); color:var(--ol-text); border-color:var(--ol-border); }
[data-bs-theme='dark'] .modal-header, [data-bs-theme='dark'] .modal-footer { border-color:var(--ol-border); }

/* Tables */
[data-bs-theme='dark'] .table { color:var(--ol-text); border-color:var(--ol-border); }
[data-bs-theme='dark'] .table thead th { background-color:#252a31; color:var(--ol-text); border-color:var(--ol-border); }
[data-bs-theme='dark'] .table tbody tr { border-color:var(--ol-border); }
[data-bs-theme='dark'] .table-hover>tbody>tr:hover { background-color:rgba(255,255,255,.06); }

/* Forms */
[data-bs-theme='dark'] .form-control,
[data-bs-theme='dark'] .form-select,
[data-bs-theme='dark'] .form-control:focus,
[data-bs-theme='dark'] .form-select:focus {
  background-color:#2b2f36; color:var(--ol-text); border-color:#3a3f47;
}
[data-bs-theme='dark'] .form-control::placeholder { color:var(--ol-muted); }

/* Others */
[data-bs-theme='dark'] hr { border-color:var(--ol-border); }
[data-bs-theme='dark'] #calendar-widget th { background-color:var(--ol-surface); }
[data-bs-theme='dark'] #calendar-widget td, [data-bs-theme='dark'] #calendar-widget th { border-color:var(--ol-border); }
[data-bs-theme='dark'] .list-group-item { background-color:var(--ol-surface); color:var(--ol-text); border-color:var(--ol-border); }
[data-bs-theme='dark'] .toast { background-color:#2b2f36; color:var(--ol-text); border-color:var(--ol-border); }
[data-bs-theme='dark'] .sidebar .nav-link.active { background-color:#3b82f6; color:#fff; }
[data-bs-theme='dark'] .sidebar .nav-link:hover { background-color:#1f2937; color:#fff; }

/* Defensive alignment for Inventario last column */
#inventario table tbody td:last-child { text-align:right; }
